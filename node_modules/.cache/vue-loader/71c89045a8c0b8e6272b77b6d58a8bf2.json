{"remainingRequest":"C:\\Users\\Alexander\\Documents\\GitHub\\Roomacle\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Alexander\\Documents\\GitHub\\Roomacle\\src\\components\\Calender.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Alexander\\Documents\\GitHub\\Roomacle\\src\\components\\Calender.vue","mtime":1616443256978},{"path":"C:\\Users\\Alexander\\Documents\\GitHub\\Roomacle\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexander\\Documents\\GitHub\\Roomacle\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Alexander\\Documents\\GitHub\\Roomacle\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexander\\Documents\\GitHub\\Roomacle\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZGIgZnJvbSAiLi4vYXNzZXRzL2RhdGEuanNvbiI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHt9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkYiwNCiAgICAgIGJ1dHRvbl9kYl9jb25uZWN0OiBbXSwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHdlZWtTdGFydERheSgpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jYWxlbmRlci53ZWVrU3RhcnQuZGF5Ow0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB3cml0ZUNhbGVuZGVyKCkgew0KICAgICAgdGhpcy5yZXNldENhbGVuZGVyKCk7DQogICAgICAvL2NvbnNvbGUubG9nKCd3cml0ZSBjYWxlbmRlcicpOw0KICAgICAgbGV0IGNvbm5lY3Rpb24gPSBbXTsNCiAgICAgIC8qY29uc29sZS5sb2coIkNvbm5lY3QtQXJyYXkgYXVmIDAgZ2VzZXR6dCIpOw0KICAgICAgY29uc29sZS5sb2coY29ubmVjdGlvbik7Ki8NCg0KICAgICAgbGV0IHdlZWtTdGFydERheSA9IHRoaXMuJHN0b3JlLnN0YXRlLmNhbGVuZGVyLndlZWtTdGFydC5kYXk7DQogICAgICBsZXQgd2Vla1N0YXJ0TW9udGggPSB0aGlzLiRzdG9yZS5zdGF0ZS5jYWxlbmRlci53ZWVrU3RhcnQubW9udGg7DQogICAgICBsZXQgd2Vla1N0YXJ0WWVhciA9IHRoaXMuJHN0b3JlLnN0YXRlLmNhbGVuZGVyLndlZWtTdGFydC55ZWFyOw0KDQogICAgICBsZXQgd2Vla1N0YXJ0RGF0ZSA9IG5ldyBEYXRlKA0KICAgICAgICB3ZWVrU3RhcnRZZWFyLA0KICAgICAgICB3ZWVrU3RhcnRNb250aCAtIDEsDQogICAgICAgIHdlZWtTdGFydERheQ0KICAgICAgKTsNCg0KICAgICAgd2Vla1N0YXJ0RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTsNCiAgICAgIC8vY29uc29sZS5sb2cod2Vla1N0YXJ0RGF0ZSk7DQoNCiAgICAgIGxldCB3ZWVrRW5kRGF5ID0gdGhpcy4kc3RvcmUuc3RhdGUuY2FsZW5kZXIud2Vla0VuZC5kYXk7DQogICAgICBsZXQgd2Vla0VuZE1vbnRoID0gdGhpcy4kc3RvcmUuc3RhdGUuY2FsZW5kZXIud2Vla0VuZC5tb250aDsNCiAgICAgIGxldCB3ZWVrRW5kWWVhciA9IHRoaXMuJHN0b3JlLnN0YXRlLmNhbGVuZGVyLndlZWtFbmQueWVhcjsNCg0KICAgICAgbGV0IHdlZWtFbmREYXRlID0gbmV3IERhdGUod2Vla0VuZFllYXIsIHdlZWtFbmRNb250aCAtIDEsIHdlZWtFbmREYXkpOw0KICAgICAgd2Vla0VuZERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7DQogICAgICAvL2NvbnNvbGUubG9nKHdlZWtFbmREYXRlKTsNCg0KICAgICAgZm9yIChjb25zdCBpbmRleCBpbiB0aGlzLmRiLnZlcmFuc3RhbHR1bmdlbikgew0KICAgICAgICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5kYi52ZXJhbnN0YWx0dW5nZW4sIGluZGV4KSkgew0KICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmRiLnZlcmFuc3RhbHR1bmdlbltpbmRleF07DQogICAgICAgICAgbGV0IGR0ID0gbmV3IERhdGUoZWxlbWVudC5kYXRlKTsNCiAgICAgICAgICBkdC5zZXRIb3VycygwLCAwLCAwLCAwKTsNCiAgICAgICAgICAvL2NvbnNvbGUubG9nKGR0KTsNCiAgICAgICAgICAvL2NvbnNvbGUubG9nKHdlZWtFbmREYXRlKTsNCiAgICAgICAgICBpZiAoZHQgPj0gd2Vla1N0YXJ0RGF0ZSAmJiBkdCA8PSB3ZWVrRW5kRGF0ZSkgew0KICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhlbGVtZW50KTsNCiAgICAgICAgICAgIGxldCBkYXkgPSBuZXcgRGF0ZShlbGVtZW50LmRhdGUpLmdldERheSgpOw0KICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXkpOw0KICAgICAgICAgICAgbGV0IGNlbGxJRCA9ICd2JyArIGVsZW1lbnQuc3RkICogMTAgKyBkYXk7DQogICAgICAgICAgICBsZXQgYnV0dG9uTmFtZSA9IGVsZW1lbnQubmFtZV9zaG9ydDsNCiAgICAgICAgICAgIGxldCBjZWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2VsbElEKTsNCiAgICAgICAgICAgIGNlbGwuZmlyc3RDaGlsZC5pbm5lclRleHQgPSBidXR0b25OYW1lOw0KICAgICAgICAgICAgY2VsbC5maXJzdENoaWxkLnN0eWxlLmJhY2tncm91bmQgPSAibGlnaHRncmV5IjsNCiAgICAgICAgICAgIGNlbGwuZmlyc3RDaGlsZC5zdHlsZS5jb2xvciA9ICJibGFjayI7DQogICAgICAgICAgICBjZWxsLmZpcnN0Q2hpbGQuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgIC8qY29uc29sZS5sb2coDQogICAgICAgICAgICAiVXBkYXRlZCBCdXR0b24tdGV4dCBpbiBjZWxsIHdpdGggSUQ6ICIgKw0KICAgICAgICAgICAgICBjZWxsSUQgKw0KICAgICAgICAgICAgICAiIHRvICIgKw0KICAgICAgICAgICAgICBidXR0b25OYW1lDQogICAgICAgICAgKTsqLw0KICAgICAgICAgICAgbGV0IGNvbWJpID0gW2NlbGxJRCwgZWxlbWVudC5faWRdOw0KICAgICAgICAgICAgY29ubmVjdGlvbi5wdXNoKGNvbWJpKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIC8qY29uc29sZS5sb2coIkNvbm5lY3QtQXJyYXkgZXJzdGVsbHQiKTsNCiAgICAgIGNvbnNvbGUubG9nKGNvbm5lY3Rpb24pOyovDQogICAgICB0aGlzLmJ1dHRvbl9kYl9jb25uZWN0ID0gY29ubmVjdGlvbjsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYnV0dG9uX2RiX2Nvbm5lY3QpOw0KICAgIH0sDQogICAgcmVzZXRDYWxlbmRlcigpIHsNCiAgICAgIGZvciAobGV0IGhvdXJfaW5kZXggPSAwOyBob3VyX2luZGV4IDwgZGIudGltZS5sZW5ndGg7IGhvdXJfaW5kZXgrKykgew0KICAgICAgICBmb3IgKGxldCBkYXlfaW5kZXggPSAwOyBkYXlfaW5kZXggPCA2OyBkYXlfaW5kZXgrKykgew0KICAgICAgICAgIGxldCBDZWxsSUQgPSAoaG91cl9pbmRleCArIDEpICogMTAgKyBkYXlfaW5kZXggKyAxOw0KICAgICAgICAgIGxldCBjZWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQ2VsbElEKTsNCiAgICAgICAgICBjZWxsLmZpcnN0Q2hpbGQuaW5uZXJUZXh0ID0gIiI7DQogICAgICAgICAgY2VsbC5maXJzdENoaWxkLnN0eWxlLmJhY2tncm91bmQgPSAid2hpdGUiOw0KICAgICAgICAgIGNlbGwuZmlyc3RDaGlsZC5zdHlsZS5jb2xvciA9ICJ3aGl0ZSI7DQogICAgICAgICAgY2VsbC5maXJzdENoaWxkLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy9lcnJvciB3aGVuIGNlbGxJRCA9IGJ1dHRvbmlkID8hPw0KICAgIG9wZW5Nb2RhbChDZWxsSUQpIHsNCiAgICAgIGNvbnNvbGUubG9nKENlbGxJRCk7DQogICAgICBsZXQgY29ubmVjdEluZGV4ID0gdGhpcy5idXR0b25fZGJfY29ubmVjdC5maW5kSW5kZXgoKGVsZW1lbnQpID0+DQogICAgICAgIGVsZW1lbnQuaW5jbHVkZXMoQ2VsbElEKQ0KICAgICAgKTsNCiAgICAgIGxldCB2SW5kZXggPSB0aGlzLmJ1dHRvbl9kYl9jb25uZWN0W2Nvbm5lY3RJbmRleF1bMV07DQogICAgICBsZXQgZGF0YSA9IHRoaXMuZGIudmVyYW5zdGFsdHVuZ2VuW3ZJbmRleF07DQogICAgICB0aGlzLiRtb2RhbC5zaG93KCJkaWFsb2ciLCB7DQogICAgICAgIHRpdGxlOiBkYXRhLm5hbWUsDQogICAgICAgIHRleHQ6IGBWZXJhbnN0YWx0dW5nOiAke2RhdGEubmFtZX0gPGJyPg0KICAgICAgICBWZXJhbnN0YWx0dW5nc251bW1lcjogJHtkYXRhLm51bX08YnI+DQogICAgICAgIERhdHVtOiAke2RhdGEuZGF0ZX1gLA0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRSYW5kb21SZ2IoaW5kZXgpIHsNCiAgICAgIHZhciBudW0gPSBNYXRoLnJvdW5kKDB4ZmZmZmZmICogTWF0aC5yYW5kb20oKSk7DQogICAgICB2YXIgciA9IG51bSA+PiAxNjsNCiAgICAgIHZhciBnID0gKG51bSA+PiA4KSAmIDI1NTsNCiAgICAgIHZhciBiID0gbnVtICYgMjU1Ow0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5kZXgpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9DQogICAgICAgICJyZ2IoIiArIHIgKyAiLCAiICsgZyArICIsICIgKyBiICsgIikiOw0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgd2Vla1N0YXJ0RGF5OiBmdW5jdGlvbiAoKSB7DQogICAgICAvL2NvbnNvbGUubG9nKCdDaGFuZ2VkIHdlZWtTdGFydERheScpOw0KICAgICAgdGhpcy53cml0ZUNhbGVuZGVyKCk7DQogICAgfSwNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLndyaXRlQ2FsZW5kZXIoKTsNCiAgfSwNCiAgY3JlYXRlZCgpIHt9LA0KfTsNCg=="},{"version":3,"sources":["Calender.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Calender.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div style=\"overflow: scroll; width: 85%\">\r\n    <v-dialog />\r\n    <table id=\"table1\" style=\"width: 100%; table-layout: fixed\">\r\n      <tr>\r\n        <th style=\"width: 20%\">Std</th>\r\n        <th>Mo</th>\r\n        <th>Di</th>\r\n        <th>Mi</th>\r\n        <th>Do</th>\r\n        <th>Fr</th>\r\n        <th>Sa</th>\r\n      </tr>\r\n      <tr v-for=\"(n, hour_index) in db.time\" :key=\"hour_index\">\r\n        <td>\r\n          <div\r\n            style=\"\r\n              display: inline-flex;\r\n              flex-grow: 3;\r\n              float: left;\r\n              padding-left: 5px;\r\n            \"\r\n          >\r\n            {{ hour_index + 1 }}.\r\n          </div>\r\n          <div\r\n            style=\"\r\n              display: inline-flex;\r\n              flex-grow: 1;\r\n              float: right;\r\n              padding-right: 5px;\r\n            \"\r\n          >\r\n            {{ db.time[hour_index].tStart }}-{{ db.time[hour_index].tEnd }}\r\n          </div>\r\n        </td>\r\n        <td\r\n          :id=\"10 * (hour_index + 1) + day_index + 1\"\r\n          v-for=\"(n, day_index) in 6\"\r\n        >\r\n          <button\r\n            @click=\"openModal(10 * (hour_index + 1) + day_index + 1)\"\r\n            :disabled=\"true\"\r\n            style=\"color: white; background: white\"\r\n          >\r\n            {{ hour_index + 1 }} - {{ day_index + 1 }}\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    <!--<button @click=\"resetCalender\">Reset Calender</button>-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport db from \"../assets/data.json\";\r\nexport default {\r\n  components: {},\r\n  data() {\r\n    return {\r\n      db,\r\n      button_db_connect: [],\r\n    };\r\n  },\r\n  computed: {\r\n    weekStartDay() {\r\n      return this.$store.state.calender.weekStart.day;\r\n    },\r\n  },\r\n  methods: {\r\n    writeCalender() {\r\n      this.resetCalender();\r\n      //console.log('write calender');\r\n      let connection = [];\r\n      /*console.log(\"Connect-Array auf 0 gesetzt\");\r\n      console.log(connection);*/\r\n\r\n      let weekStartDay = this.$store.state.calender.weekStart.day;\r\n      let weekStartMonth = this.$store.state.calender.weekStart.month;\r\n      let weekStartYear = this.$store.state.calender.weekStart.year;\r\n\r\n      let weekStartDate = new Date(\r\n        weekStartYear,\r\n        weekStartMonth - 1,\r\n        weekStartDay\r\n      );\r\n\r\n      weekStartDate.setHours(0, 0, 0, 0);\r\n      //console.log(weekStartDate);\r\n\r\n      let weekEndDay = this.$store.state.calender.weekEnd.day;\r\n      let weekEndMonth = this.$store.state.calender.weekEnd.month;\r\n      let weekEndYear = this.$store.state.calender.weekEnd.year;\r\n\r\n      let weekEndDate = new Date(weekEndYear, weekEndMonth - 1, weekEndDay);\r\n      weekEndDate.setHours(0, 0, 0, 0);\r\n      //console.log(weekEndDate);\r\n\r\n      for (const index in this.db.veranstaltungen) {\r\n        if (Object.hasOwnProperty.call(this.db.veranstaltungen, index)) {\r\n          const element = this.db.veranstaltungen[index];\r\n          let dt = new Date(element.date);\r\n          dt.setHours(0, 0, 0, 0);\r\n          //console.log(dt);\r\n          //console.log(weekEndDate);\r\n          if (dt >= weekStartDate && dt <= weekEndDate) {\r\n            //console.log(element);\r\n            let day = new Date(element.date).getDay();\r\n            //console.log(day);\r\n            let cellID = 'v' + element.std * 10 + day;\r\n            let buttonName = element.name_short;\r\n            let cell = document.getElementById(cellID);\r\n            cell.firstChild.innerText = buttonName;\r\n            cell.firstChild.style.background = \"lightgrey\";\r\n            cell.firstChild.style.color = \"black\";\r\n            cell.firstChild.disabled = false;\r\n            /*console.log(\r\n            \"Updated Button-text in cell with ID: \" +\r\n              cellID +\r\n              \" to \" +\r\n              buttonName\r\n          );*/\r\n            let combi = [cellID, element._id];\r\n            connection.push(combi);\r\n          }\r\n        }\r\n      }\r\n      /*console.log(\"Connect-Array erstellt\");\r\n      console.log(connection);*/\r\n      this.button_db_connect = connection;\r\n      console.log(this.button_db_connect);\r\n    },\r\n    resetCalender() {\r\n      for (let hour_index = 0; hour_index < db.time.length; hour_index++) {\r\n        for (let day_index = 0; day_index < 6; day_index++) {\r\n          let CellID = (hour_index + 1) * 10 + day_index + 1;\r\n          let cell = document.getElementById(CellID);\r\n          cell.firstChild.innerText = \"\";\r\n          cell.firstChild.style.background = \"white\";\r\n          cell.firstChild.style.color = \"white\";\r\n          cell.firstChild.disabled = true;\r\n        }\r\n      }\r\n    },\r\n    //error when cellID = buttonid ?!?\r\n    openModal(CellID) {\r\n      console.log(CellID);\r\n      let connectIndex = this.button_db_connect.findIndex((element) =>\r\n        element.includes(CellID)\r\n      );\r\n      let vIndex = this.button_db_connect[connectIndex][1];\r\n      let data = this.db.veranstaltungen[vIndex];\r\n      this.$modal.show(\"dialog\", {\r\n        title: data.name,\r\n        text: `Veranstaltung: ${data.name} <br>\r\n        Veranstaltungsnummer: ${data.num}<br>\r\n        Datum: ${data.date}`,\r\n      });\r\n    },\r\n    getRandomRgb(index) {\r\n      var num = Math.round(0xffffff * Math.random());\r\n      var r = num >> 16;\r\n      var g = (num >> 8) & 255;\r\n      var b = num & 255;\r\n      document.getElementById(index).style.backgroundColor =\r\n        \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\r\n    },\r\n  },\r\n  watch: {\r\n    weekStartDay: function () {\r\n      //console.log('Changed weekStartDay');\r\n      this.writeCalender();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.writeCalender();\r\n  },\r\n  created() {},\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n<style scoped>\r\ntable,\r\ntd,\r\nth {\r\n  border: 1px solid black;\r\n  padding: 0;\r\n}\r\n#table1 {\r\n  border-spacing: 0;\r\n}\r\nbutton {\r\n  margin: 0;\r\n  padding: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  border: 0;\r\n}\r\n</style>"]}]}